(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3bbef0c5"],{"4cce":function(e,t,n){"use strict";n.d(t,"k",(function(){return o})),n.d(t,"j",(function(){return a})),n.d(t,"e",(function(){return i})),n.d(t,"i",(function(){return u})),n.d(t,"h",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"g",(function(){return f})),n.d(t,"a",(function(){return m})),n.d(t,"f",(function(){return p}));var r=n("b775"),o=function(e){return Object(r["a"])({method:"POST",url:"/app/v1_0/authorizations",data:e})},a=function(e){return Object(r["a"])({method:"GET",url:"/app/v1_0/sms/codes/".concat(e)})},i=function(){return Object(r["a"])({method:"GET",url:"/app/v1_0/user/profile"})},u=function(e){return Object(r["a"])({method:"PATCH",url:"/app/v1_0/user/profile",data:e})},s=function(e){return Object(r["a"])({method:"PATCH",url:"/app/v1_0/user/photo",data:e})},c=function(e){return Object(r["a"])({method:"POST",url:"/app/v1_0/user/followings",data:e})},l=function(e){return Object(r["a"])({method:"DELETE",url:"/app/v1_0/user/followings/".concat(e)})},d=function(e){return Object(r["a"])({method:"POST",url:"/app/v1_0/article/collections",data:e})},f=function(e){return Object(r["a"])({method:"DELETE",url:"/app/v1_0/article/".concat(e)})},m=function(e){return Object(r["a"])({method:"POST",url:"/app/v1_0/article/likings",data:e})},p=function(e){return Object(r["a"])({method:"DELETE",url:"/app/v1_0/article/likings/".concat(e)})}},"9ed6":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"login"}},[n("van-nav-bar",{staticClass:"header_top_nav",attrs:{title:"登录 / 注册","left-text":"返回","left-arrow":""},on:{"click-left":function(t){return e.$router.push("/user")}}}),n("div",{attrs:{id:"from"}},[n("van-form",{ref:"forms",attrs:{inset:"","submit-on-enter":!0,"show-error":!0,"show-error-message":!1,"validate-first":""},on:{submit:e.onLogin,failed:e.ver_err}},[n("van-field",{staticClass:"iconfont icon-shouji",attrs:{maxlength:"11",rules:e.Rules.mobile,name:"mobile",placeholder:"请输入手机号"},model:{value:e.userInfo.mobile,callback:function(t){e.$set(e.userInfo,"mobile",t)},expression:"userInfo.mobile"}}),n("van-field",{staticClass:"iconfont icon-yanzhengma",attrs:{clearable:"",center:!0,maxlength:"6",rules:e.Rules.code,placeholder:"请输入验证码"},scopedSlots:e._u([{key:"button",fn:function(){return[e.time_btn?n("van-count-down",{attrs:{time:6e4,format:"ss s"},on:{finish:function(t){e.time_btn=!1}}}):n("van-button",{attrs:{disabled:e.time_btn,size:"small",round:""},on:{click:function(t){return t.preventDefault(),e.getCode.apply(null,arguments)}}},[e._v(" 发送验证码")])]},proxy:!0}]),model:{value:e.userInfo.code,callback:function(t){e.$set(e.userInfo,"code",t)},expression:"userInfo.code"}}),n("div",{attrs:{id:"btn"}},[n("van-button",{attrs:{id:"su_btn",disabled:e.isLoading,loading:e.isLoading,"loading-text":"登录中...",block:"",round:""}},[e._v("登录")])],1)],1)],1),e._m(0)],1)},o=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"text"}},[n("p",[e._v("账号：13911111111 密码：246810")]),n("p",[e._v("如果手机收不到验证码 密码：246810")]),n("p",[e._v("测试评论： 134633")])])}],a=n("1da1"),i=(n("96cf"),n("d399")),u=n("4cce"),s={name:"login",data:function(){return{userInfo:{mobile:"",code:""},isLoading:!1,Rules:{mobile:[{required:!0,message:"输入不能为空"},{pattern:/^1[3|5|7|8][1|2|3|4|5|6|7|8|9]\d{8}$/,message:"电话号格式错误"}],code:[{required:!0,message:"输入不能为空"},{pattern:/^\d{6}$/,message:"输入6位数字的验证码"}]},time_btn:!1}},methods:{onLogin:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.prev=1,t.next=4,Object(u["k"])(e.userInfo);case 4:n=t.sent,r=n.data.data,e.$store.commit("setUser",r),i["a"].success("登录成功"),e.isLoading=!1,e.$store.commit("removeInclude","layout"),e.$router.push(e.$route.query.redirects||"/user"),t.next=18;break;case 13:t.prev=13,t.t0=t["catch"](1),console.log(t.t0),i["a"].fail("登录失败"),e.isLoading=!1;case 18:case"end":return t.stop()}}),t,null,[[1,13]])})))()},ver_err:function(e){e.errors[0]?i["a"].fail(e.errors[0].message):i["a"].fail(e.errors[1].message)},getCode:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$refs["forms"].validate("mobile");case 3:return e.time_btn=!0,t.next=6,Object(u["j"])(e.userInfo.mobile);case 6:i["a"].success("验证码发送成功"),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](0),i["a"].fail(t.t0.message),e.time_btn=!1;case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))()}}},c=s,l=(n("ee4b"),n("2877")),d=Object(l["a"])(c,r,o,!1,null,"0ee50c8a",null);t["default"]=d.exports},b673:function(e,t,n){},ee4b:function(e,t,n){"use strict";n("b673")}}]);
//# sourceMappingURL=chunk-3bbef0c5.1f35c4f5.js.map