{"version":3,"sources":["webpack:///./src/views/user/index.vue?d653","webpack:///./src/apis/users.js","webpack:///./src/views/user/index.vue?caee","webpack:///src/views/user/index.vue","webpack:///./src/views/user/index.vue?49db","webpack:///./src/views/user/index.vue"],"names":["userLogin","data","request","method","url","userCode","mobile","getUser","setUser","setPhoto","addFollowed","callFollowed","aut_id","artLike","noLike","target","Good","noGood","render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","userInfo","photo","_v","_s","name","on","$event","$router","push","_m","directives","rawName","value","expression","quit_btn","staticRenderFns","methods","message","created","get_user_info","computed","component"],"mappings":"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","file":"js/chunk-00833cac.d817dd0c.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=4e550aeb&lang=less&scoped=true&\"","/***\n * 处理用户请求相关请求\n * \n */\n\nimport request from '@/utils/request.js'\n\n// 用户登录注册认证\nexport const userLogin = (data) => {\n    return request({\n        method: 'POST',\n        url: '/app/v1_0/authorizations',\n        data,\n    })\n}\n// 获取用户验证码\nexport const userCode = (mobile) => {\n    return request({\n        method: 'GET',\n        url: `/app/v1_0/sms/codes/${mobile}`,\n    })\n}\n//获取用户资料\nexport const getUser = () => {\n    return request({\n        method: 'GET',\n        url: '/app/v1_0/user/profile'\n\n        //用户token在请求拦截中设置了\n    })\n}\n// 编辑用户资料\nexport const setUser = (data) => {\n    return request({\n        method: 'PATCH',\n        url: '/app/v1_0/user/profile',\n        data,\n    })\n}\n// 编辑用户照片资料\nexport const setPhoto = (data) => {\n    return request({\n        method: 'PATCH',\n        url: '/app/v1_0/user/photo',\n        data,\n    })\n}\n// 关注其他用户\nexport const addFollowed = (data) => {\n    return request({\n        method: 'POST',\n        url: '/app/v1_0/user/followings',\n        data\n    })\n}\n// 取消关注其他用户\nexport const callFollowed = (aut_id) => {\n    return request({\n        method: 'DELETE',\n        url: `/app/v1_0/user/followings/${aut_id}`,\n    })\n}\n// 收藏文章\nexport const artLike = (data) => {\n    return request({\n        method: 'POST',\n        url: '/app/v1_0/article/collections',\n        data,\n    })\n}\n// 取消收藏文章\nexport const noLike = (target) => {\n    return request({\n        method: 'DELETE',\n        url: `/app/v1_0/article/${target}`,\n    })\n}\n// 点赞文章\nexport const Good = (data) => {\n    return request({\n        method: 'POST',\n        url: `/app/v1_0/article/likings`,\n        data\n    })\n}\n// 取消点赞文章\nexport const noGood = (target) => {\n    return request({\n        method: 'DELETE',\n        url: `/app/v1_0/article/likings/${target}`,\n    })\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"user\"}},[_c('div',{attrs:{\"id\":\"user_info\"}},[(_vm.User)?_c('div',{attrs:{\"id\":\"info_top\"}},[_c('div',{attrs:{\"id\":\"info\"}},[_c('div',{attrs:{\"id\":\"header_img\"}},[_c('van-image',{staticClass:\"img\",attrs:{\"fit\":\"cover\",\"round\":\"\",\"src\":_vm.userInfo.photo}})],1),_c('p',[_vm._v(_vm._s(_vm.userInfo.name || \"新用户\"))])]),_c('van-button',{staticClass:\"btn_edit\",attrs:{\"to\":\"/userDatum\",\"plain\":\"\",\"round\":\"\",\"type\":\"primary\",\"size\":\"small\"}},[_vm._v(\"编辑用户信息\")])],1):_c('div',{attrs:{\"id\":\"demo_login\"}},[_c('div',{attrs:{\"id\":\"demo_img\"},on:{\"click\":function($event){return _vm.$router.push('/login')}}}),_c('p',{on:{\"click\":function($event){return _vm.$router.push('/login')}}},[_vm._v(\"登录 / 注册\")])]),_vm._m(0)]),_c('div',{attrs:{\"id\":\"Star_li\"}},[_c('van-grid',{attrs:{\"column-num\":2}},[_c('van-grid-item',{attrs:{\"icon\":\"like-o\",\"id\":\"star\",\"text\":\"收藏\"}}),_c('van-grid-item',{attrs:{\"icon\":\"underway-o\",\"id\":\"history\",\"text\":\"历史\"}})],1)],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.User),expression:\"User\"}],attrs:{\"id\":\"news\"}},[_c('p',[_vm._v(\"消息通知\")]),_c('i',{staticClass:\"iconfont icon-you\"})]),_c('div',{attrs:{\"id\":\"xiaozhi\"},on:{\"click\":function($event){return _vm.$router.push('/user/chat')}}},[_c('p',[_vm._v(\"小智同学\")]),_c('i',{staticClass:\"iconfont icon-you\"})]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.User),expression:\"User\"}],attrs:{\"id\":\"quit\"}},[_c('van-button',{attrs:{\"type\":\"danger\",\"block\":\"\",\"size\":\"large\",\"round\":\"\"},on:{\"click\":_vm.quit_btn}},[_vm._v(\"退出登录\")])],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"info_bottom\"}},[_c('div',{staticClass:\"text\"},[_c('span',[_vm._v(\"11\")]),_c('p',[_vm._v(\"帖子\")])]),_c('div',{staticClass:\"text\"},[_c('span',[_vm._v(\"11\")]),_c('p',[_vm._v(\"关注\")])]),_c('div',{staticClass:\"text\"},[_c('span',[_vm._v(\"11\")]),_c('p',[_vm._v(\"粉丝\")])]),_c('div',{staticClass:\"text\"},[_c('span',[_vm._v(\"11\")]),_c('p',[_vm._v(\"获赞\")])])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"user\">\n    <!-- 用户信息区 -->\n    <div id=\"user_info\">\n      <!-- 顶部信息区 -->\n      <div id=\"info_top\" v-if=\"User\">\n        <!-- 头像 -->\n        <div id=\"info\">\n          <div id=\"header_img\">\n            <van-image fit=\"cover\" class=\"img\" round :src=\"userInfo.photo\">\n              <!-- <template v-slot:loading>\n                <van-loading type=\"spinner\" size=\"20\" />\n              </template>\n              <template v-slot:error>加载失败</template> -->\n            </van-image>\n          </div>\n          <p>{{ userInfo.name || \"新用户\" }}</p>\n        </div>\n        <!-- 编辑用户信息按钮 -->\n        <van-button\n          to=\"/userDatum\"\n          plain\n          round\n          class=\"btn_edit\"\n          type=\"primary\"\n          size=\"small\"\n          >编辑用户信息</van-button\n        >\n      </div>\n\n      <!-- 未登录状态 -->\n      <div id=\"demo_login\" v-else>\n        <div id=\"demo_img\" @click=\"$router.push('/login')\"></div>\n        <p @click=\"$router.push('/login')\">登录 / 注册</p>\n      </div>\n\n      <!-- 关注及粉丝区 -->\n      <div id=\"info_bottom\">\n        <div class=\"text\">\n          <span>11</span>\n          <p>帖子</p>\n        </div>\n        <div class=\"text\">\n          <span>11</span>\n          <p>关注</p>\n        </div>\n        <div class=\"text\">\n          <span>11</span>\n          <p>粉丝</p>\n        </div>\n        <div class=\"text\">\n          <span>11</span>\n          <p>获赞</p>\n        </div>\n      </div>\n    </div>\n\n    <!-- 收藏和历史 -->\n    <div id=\"Star_li\">\n      <van-grid :column-num=\"2\">\n        <van-grid-item icon=\"like-o\" id=\"star\" text=\"收藏\" />\n        <van-grid-item icon=\"underway-o\" id=\"history\" text=\"历史\" />\n      </van-grid>\n    </div>\n\n    <!-- 消息模块 -->\n    <div id=\"news\" v-show=\"User\">\n      <p>消息通知</p>\n      <i class=\"iconfont icon-you\"></i>\n    </div>\n    <!-- 小智同学 -->\n    <div id=\"xiaozhi\" @click=\"$router.push('/user/chat')\">\n      <p>小智同学</p>\n      <i class=\"iconfont icon-you\"></i>\n    </div>\n    <!-- 退出登录 -->\n    <div id=\"quit\" v-show=\"User\">\n      <van-button type=\"danger\" block size=\"large\" round @click=\"quit_btn\"\n        >退出登录</van-button\n      >\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\nimport { Dialog, Toast } from \"vant\";\nimport { getUser } from \"@/apis/users\";\nexport default {\n  name: \"user\",\n  data() {\n    return {\n      // 用户的资料信息\n      userInfo: {},\n    };\n  },\n\n  methods: {\n    // 退出登录功能\n    quit_btn() {\n      Dialog.confirm({\n        message: \"是否准备退出登录？\",\n      })\n        .then(() => {\n          try {\n            this.$store.commit(\"setUser\", null);\n          } catch (error) {\n            Toast.fail(\"退出登录失败\");\n          }\n        })\n        .catch(() => {\n          Toast.fail(\"取消退出登录\");\n          return;\n        });\n    },\n\n    // 获取用户资料\n    async get_user_info() {\n      try {\n        const res = await getUser();\n\n        let datas = res.data.data;\n\n        this.userInfo = datas;\n        // console.log(datas);\n      } catch (error) {\n        console.log(error);\n      }\n    },\n  },\n\n  created() {\n    this.get_user_info();\n  },\n\n  computed: {\n    // 将vuex中的state.User数据映射值组件\n    ...mapState([\"User\"]),\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n#user {\n  display: flex;\n  flex-flow: column nowrap;\n  align-items: center;\n  // 上部信息\n  #user_info {\n    position: relative;\n    padding-top: 20px;\n    width: 100%;\n    height: 300px;\n    background-image: url(\"./img/user_bg.jpg\");\n    background-size: cover;\n    border: 2px solid rgb(26, 16, 68);\n    background-repeat: no-repeat;\n    // 上半部信息区\n    #info_top {\n      display: flex;\n      align-items: center;\n      justify-content: space-around;\n      width: 100%;\n      height: 200px;\n      // 用户\n      #info {\n        display: flex;\n        align-items: center;\n        // 头像区\n        #header_img {\n          width: 80px;\n          height: 80px;\n          // 头像\n          .img {\n            width: 80px;\n            height: 80px;\n            border: 2px solid #fff;\n          }\n        }\n        // 昵称\n        p {\n          margin-left: 10px;\n          font-size: 25px;\n          color: #fff;\n        }\n      }\n      // 编辑信息\n      .btn_edit {\n        border: 0;\n        color: #fff;\n        font-size: 10px;\n        background-color: rgba(26, 16, 68, 0.7);\n      }\n    }\n\n    // 未登录状态\n    #demo_login {\n      display: flex;\n      flex-flow: column nowrap;\n      align-items: center;\n      justify-content: center;\n      width: 100%;\n      height: 200px;\n\n      #demo_img {\n        width: 80px;\n        height: 80px;\n        background-color: #000;\n        border-radius: 50%;\n        background-image: url(\"./img/user.jpg\");\n        background-size: cover;\n      }\n\n      p {\n        margin-top: 10px;\n        font-size: 20px;\n        color: #fff;\n        font-weight: 700;\n      }\n    }\n\n    // 下半部信息区\n    #info_bottom {\n      position: absolute;\n      display: flex;\n      justify-content: space-around;\n      bottom: 0px;\n      left: 0px;\n      width: 100%;\n      background-image: linear-gradient(\n        to top,\n        rgba(26, 16, 68, 0.8),\n        rgba(26, 16, 68, 0.2)\n      );\n      height: 70px;\n\n      // 用户详细行为数据\n      .text {\n        display: flex;\n        flex-flow: column nowrap;\n        justify-content: space-around;\n        align-items: center;\n        width: 80px;\n        height: 70px;\n        span {\n          font-size: 20px;\n          color: #fff;\n          font-weight: 700;\n        }\n\n        p {\n          font-size: 15px;\n          color: #fff;\n        }\n      }\n    }\n  }\n  // 收藏or历史\n  #Star_li {\n    width: 96%;\n    margin: 10px 0px;\n    font-weight: 700;\n\n    #star {\n      color: red;\n    }\n\n    #history {\n      color: yellow;\n    }\n  }\n\n  // 消息模块\n  #news {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 96%;\n    height: 50px;\n    background-color: #fff;\n    border-radius: 5px;\n    padding: 0px 10px;\n\n    p {\n      font-size: 18px;\n      color: #666;\n    }\n\n    i {\n      color: #ccc;\n    }\n  }\n\n  // 小智\n  #xiaozhi {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 96%;\n    height: 50px;\n    background-color: #fff;\n    border-radius: 5px;\n    margin: 10px 0px;\n    padding: 0px 10px;\n\n    p {\n      line-height: 50px;\n      font-size: 18px;\n      color: #666;\n    }\n    i {\n      color: #ccc;\n    }\n  }\n\n  #quit {\n    width: 100%;\n    padding: 0px 10px;\n  }\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=4e550aeb&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=4e550aeb&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4e550aeb\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}