{"version":3,"sources":["webpack:///./src/apis/users.js","webpack:///./src/views/login/index.vue?876a","webpack:///src/views/login/index.vue","webpack:///./src/views/login/index.vue?5b56","webpack:///./src/views/login/index.vue","webpack:///./src/views/login/index.vue?b7ab"],"names":["userLogin","data","request","method","url","userCode","mobile","getUser","setUser","setPhoto","addFollowed","callFollowed","aut_id","artLike","noLike","target","Good","noGood","render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","on","$event","$router","push","ref","onLogin","ver_err","Rules","model","value","userInfo","callback","$$v","$set","expression","code","scopedSlots","_u","key","fn","time_btn","preventDefault","getCode","apply","arguments","_v","proxy","isLoading","_m","staticRenderFns","name","methods","e","errors","component"],"mappings":"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","file":"js/chunk-3bbef0c5.1f35c4f5.js","sourcesContent":["/***\n * 处理用户请求相关请求\n * \n */\n\nimport request from '@/utils/request.js'\n\n// 用户登录注册认证\nexport const userLogin = (data) => {\n    return request({\n        method: 'POST',\n        url: '/app/v1_0/authorizations',\n        data,\n    })\n}\n// 获取用户验证码\nexport const userCode = (mobile) => {\n    return request({\n        method: 'GET',\n        url: `/app/v1_0/sms/codes/${mobile}`,\n    })\n}\n//获取用户资料\nexport const getUser = () => {\n    return request({\n        method: 'GET',\n        url: '/app/v1_0/user/profile'\n\n        //用户token在请求拦截中设置了\n    })\n}\n// 编辑用户资料\nexport const setUser = (data) => {\n    return request({\n        method: 'PATCH',\n        url: '/app/v1_0/user/profile',\n        data,\n    })\n}\n// 编辑用户照片资料\nexport const setPhoto = (data) => {\n    return request({\n        method: 'PATCH',\n        url: '/app/v1_0/user/photo',\n        data,\n    })\n}\n// 关注其他用户\nexport const addFollowed = (data) => {\n    return request({\n        method: 'POST',\n        url: '/app/v1_0/user/followings',\n        data\n    })\n}\n// 取消关注其他用户\nexport const callFollowed = (aut_id) => {\n    return request({\n        method: 'DELETE',\n        url: `/app/v1_0/user/followings/${aut_id}`,\n    })\n}\n// 收藏文章\nexport const artLike = (data) => {\n    return request({\n        method: 'POST',\n        url: '/app/v1_0/article/collections',\n        data,\n    })\n}\n// 取消收藏文章\nexport const noLike = (target) => {\n    return request({\n        method: 'DELETE',\n        url: `/app/v1_0/article/${target}`,\n    })\n}\n// 点赞文章\nexport const Good = (data) => {\n    return request({\n        method: 'POST',\n        url: `/app/v1_0/article/likings`,\n        data\n    })\n}\n// 取消点赞文章\nexport const noGood = (target) => {\n    return request({\n        method: 'DELETE',\n        url: `/app/v1_0/article/likings/${target}`,\n    })\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"login\"}},[_c('van-nav-bar',{staticClass:\"header_top_nav\",attrs:{\"title\":\"登录 / 注册\",\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.$router.push('/user')}}}),_c('div',{attrs:{\"id\":\"from\"}},[_c('van-form',{ref:\"forms\",attrs:{\"inset\":\"\",\"submit-on-enter\":true,\"show-error\":true,\"show-error-message\":false,\"validate-first\":\"\"},on:{\"submit\":_vm.onLogin,\"failed\":_vm.ver_err}},[_c('van-field',{staticClass:\"iconfont icon-shouji\",attrs:{\"maxlength\":\"11\",\"rules\":_vm.Rules.mobile,\"name\":\"mobile\",\"placeholder\":\"请输入手机号\"},model:{value:(_vm.userInfo.mobile),callback:function ($$v) {_vm.$set(_vm.userInfo, \"mobile\", $$v)},expression:\"userInfo.mobile\"}}),_c('van-field',{staticClass:\"iconfont icon-yanzhengma\",attrs:{\"clearable\":\"\",\"center\":true,\"maxlength\":\"6\",\"rules\":_vm.Rules.code,\"placeholder\":\"请输入验证码\"},scopedSlots:_vm._u([{key:\"button\",fn:function(){return [(_vm.time_btn)?_c('van-count-down',{attrs:{\"time\":1000 * 60,\"format\":\"ss s\"},on:{\"finish\":function($event){_vm.time_btn = false}}}):_c('van-button',{attrs:{\"disabled\":_vm.time_btn,\"size\":\"small\",\"round\":\"\"},on:{\"click\":function($event){$event.preventDefault();return _vm.getCode.apply(null, arguments)}}},[_vm._v(\" 发送验证码\")])]},proxy:true}]),model:{value:(_vm.userInfo.code),callback:function ($$v) {_vm.$set(_vm.userInfo, \"code\", $$v)},expression:\"userInfo.code\"}}),_c('div',{attrs:{\"id\":\"btn\"}},[_c('van-button',{attrs:{\"id\":\"su_btn\",\"disabled\":_vm.isLoading,\"loading\":_vm.isLoading,\"loading-text\":\"登录中...\",\"block\":\"\",\"round\":\"\"}},[_vm._v(\"登录\")])],1)],1)],1),_vm._m(0)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"text\"}},[_c('p',[_vm._v(\"账号：13911111111 密码：246810\")]),_c('p',[_vm._v(\"如果手机收不到验证码 密码：246810\")]),_c('p',[_vm._v(\"测试评论： 134633\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"login\">\n    <!-- @click-left=\"onClickLeft\" -->\n    <!-- @click-right=\"onClickRight\" -->\n    <!-- 登录头部 -->\n    <van-nav-bar\n      title=\"登录 / 注册\"\n      left-text=\"返回\"\n      class=\"header_top_nav\"\n      left-arrow\n      @click-left=\"$router.push('/user')\"\n    />\n\n    <!-- 登陆数据 -->\n    <div id=\"from\">\n      <van-form\n        inset\n        :submit-on-enter=\"true\"\n        :show-error=\"true\"\n        :show-error-message=\"false\"\n        validate-first\n        @submit=\"onLogin\"\n        @failed=\"ver_err\"\n        ref=\"forms\"\n      >\n        <van-field\n          maxlength=\"11\"\n          class=\"iconfont icon-shouji\"\n          v-model=\"userInfo.mobile\"\n          :rules=\"Rules.mobile\"\n          name=\"mobile\"\n          placeholder=\"请输入手机号\"\n        />\n        <van-field\n          clearable\n          :center=\"true\"\n          maxlength=\"6\"\n          v-model=\"userInfo.code\"\n          :rules=\"Rules.code\"\n          class=\"iconfont icon-yanzhengma\"\n          placeholder=\"请输入验证码\"\n          ><template #button>\n            <!-- 倒计时控件 -->\n            <van-count-down\n              @finish=\"time_btn = false\"\n              v-if=\"time_btn\"\n              :time=\"1000 * 60\"\n              format=\"ss s\"\n            />\n            <!-- 发送验证码 -->\n            <van-button\n              v-else\n              :disabled=\"time_btn\"\n              size=\"small\"\n              round\n              @click.prevent=\"getCode\"\n            >\n              发送验证码</van-button\n            >\n          </template></van-field\n        >\n        <!-- 登录按钮 -->\n        <div id=\"btn\">\n          <van-button\n            id=\"su_btn\"\n            :disabled=\"isLoading\"\n            :loading=\"isLoading\"\n            loading-text=\"登录中...\"\n            block\n            round\n            >登录</van-button\n          >\n        </div>\n      </van-form>\n    </div>\n    <!-- 底部文本 -->\n    <div id=\"text\">\n      <p>账号：13911111111 密码：246810</p>\n      <p>如果手机收不到验证码 密码：246810</p>\n      <p>测试评论： 134633</p>\n    </div>\n  </div>\n</template>\n\n<script>\n// 引入提示信息\nimport { Toast } from \"vant\";\nimport { userLogin, userCode } from \"@/apis/users.js\";\nexport default {\n  name: \"login\",\n  data() {\n    return {\n      // 用户信息\n      userInfo: { mobile: \"\", code: \"\" },\n      // 控制登录加载按钮\n      isLoading: false,\n      // 表单校验规则\n      Rules: {\n        mobile: [\n          { required: true, message: \"输入不能为空\" },\n          {\n            pattern: /^1[3|5|7|8][1|2|3|4|5|6|7|8|9]\\d{8}$/,\n            message: \"电话号格式错误\",\n          },\n        ],\n        code: [\n          { required: true, message: \"输入不能为空\" },\n          { pattern: /^\\d{6}$/, message: \"输入6位数字的验证码\" },\n        ],\n      },\n      // 验证码按钮禁用\n      time_btn: false,\n    };\n  },\n  methods: {\n    // 登录\n    async onLogin() {\n      // 点击登录显示登录中\n      this.isLoading = true;\n\n      try {\n        const res = await userLogin(this.userInfo);\n        // 登录成功\n        let datas = res.data.data;\n        // 将用户token存入VueX\n        this.$store.commit(\"setUser\", datas);\n        // 加载提示\n        Toast.success(\"登录成功\");\n        // 关闭登录显示登录中\n        this.isLoading = false;\n        // 登录成功后删除前一个的组件缓存\n        this.$store.commit(\"removeInclude\", \"layout\");\n        // 跳转\n        this.$router.push(this.$route.query.redirects || \"/user\");\n      } catch (error) {\n        // 登录失败\n        console.log(error);\n        // 加载提示\n        Toast.fail(\"登录失败\");\n        // 关闭登录显示登录中\n        this.isLoading = false;\n      }\n    },\n    // 验证不通过时\n    ver_err(e) {\n      // 验证提示信息\n      if (e.errors[0]) {\n        Toast.fail(e.errors[0].message);\n        return;\n      }\n      Toast.fail(e.errors[1].message);\n    },\n    // 获取手机验证码\n    async getCode() {\n      // 单独进行表单验证\n      try {\n        // 验证\n        await this.$refs[\"forms\"].validate(\"mobile\");\n        // 发送验证码\n        // 禁用btn\n        this.time_btn = true;\n        await userCode(this.userInfo.mobile);\n        // 提示信息\n        Toast.success(\"验证码发送成功\");\n      } catch (error) {\n        Toast.fail(error.message);\n        // 开启btn\n        this.time_btn = false;\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n#login {\n  #from {\n    padding: 25px 10px 0px 10px;\n    .van-field__button {\n      height: 24px;\n      .van-button {\n        background-color: rgb(26, 16, 68);\n        color: #fff;\n        font-size: 10px;\n      }\n    }\n    // 提交按钮\n    #btn {\n      padding: 25px 15px;\n      #su_btn {\n        color: #fff;\n        background-color: rgb(26, 16, 68);\n      }\n    }\n  }\n\n  // 底部文本\n  #text {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    width: 100%;\n    p {\n      margin: 10px;\n      color: #666;\n      font-size: 10px;\n    }\n  }\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=0ee50c8a&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=0ee50c8a&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0ee50c8a\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=0ee50c8a&lang=less&scoped=true&\""],"sourceRoot":""}